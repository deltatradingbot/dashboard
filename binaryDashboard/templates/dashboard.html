{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- theme meta -->
    <meta name="theme-name" content="focus" />
    <title>Delta Trading Bot</title>
    <!-- ================= Favicon ================== -->
    <!-- Standard -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="http://placehold.it/64.png/000/fff">
    <!-- Retina iPad Touch Icon-->
    <link rel="apple-touch-icon" sizes="144x144" href="http://placehold.it/144.png/000/fff">
    <!-- Retina iPhone Touch Icon-->
    <link rel="apple-touch-icon" sizes="114x114" href="http://placehold.it/114.png/000/fff">
    <!-- Standard iPad Touch Icon-->
    <link rel="apple-touch-icon" sizes="72x72" href="http://placehold.it/72.png/000/fff">
    <!-- Standard iPhone Touch Icon-->
    <link rel="apple-touch-icon" sizes="57x57" href="http://placehold.it/57.png/000/fff">
    <!-- Styles -->
    <link href="{% static 'css/lib/calendar2/pignose.calendar.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/lib/chartist/chartist.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/lib/font-awesome.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/lib/themify-icons.css' %}" rel="stylesheet">
    <link href="{% static 'css/lib/owl.carousel.min.css' %}" rel="stylesheet" />
    <link href="{% static 'css/lib/owl.theme.default.min.css' %}" rel="stylesheet" />
    <link href="{% static 'css/lib/weather-icons.css' %}" rel="stylesheet" />
    <link href="{% static 'css/lib/menubar/sidebar.css' %}" rel="stylesheet">
    <link href="{% static 'css/lib/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/lib/helper.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <div class="sidebar sidebar-hide-to-small sidebar-shrink sidebar-gestures">
        <div class="nano">
            <div class="nano-content">
                <ul>
                    <div class="logo"><a href="index.html">
                            <img width=200 height=200 style="background-color: white;" src="{% static 'img/logo.png' %}" alt="" /></a></div>
                    <li class="label">Main</li>
                    <li><a href="/dashboard"><i class="ti-home"></i>Dashboard</a></li>
                    <li><a href="/rules"><i class="fa-solid fa-star"></i>Rules</a></li>
                    <li><a href="/disclaimer"><i class="fa-solid fa-circle-exclamation"></i>Disclaimer</a></li>
                    <!-- <li><a class="sidebar-sub-toggle"><i class="ti-home"></i> Dashboard <span
                                class="badge badge-primary">2</span> <span
                                class="sidebar-collapse-icon ti-angle-down"></span></a>
                        <ul>
                            <li><a href="index.html">Dashboard 1</a></li>
                            <li><a href="index.html">Dashboard 2</a></li>
                        </ul>
                    </li> -->
  
              
                    <li><a href="/auth/logout"><i class="ti-close"></i> Logout</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- /# sidebar -->

    <div class="header">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="float-left">
                        <div class="hamburger sidebar-toggle">
                            <span class="line"></span>
                            <span class="line"></span>
                            <span class="line"></span>
                        </div>
                    </div>
                    <div class="float-right">
                        <div class="dropdown dib">
                            <div class="header-icon" data-toggle="dropdown">
                                <span class="user-avatar">Hey John
                                </span>
                 
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



      <!-- lets begin -->
      <div class="content-wrap">
        <div class="main">
          <div class="container-fluid">
       
             
            <section id="section-start">

              <div class="col-lg-12">
                <div class="card">
                  <div class="card-title">
                    <center><h4>A Reminder to Follow Signals Cautiously and Implement Money Management </h4></center>
                    <div class="scrollable-div">
                      <div class="content">
                          {% for l in lines %}
                          {% if l.dir == "call" %}
                          <br><b class='m-3 mt-3 text-dark'>{{l.t}}</b> : <span class='m-2 text-success'>{{l.s}}</span><hr>
                          {% elif l.dir == "put" %}
                          <br><b class='m-3 mt-3 text-dark'>{{l.t}}</b> : <span class='m-2 text-danger'>{{l.s}}</span><hr>
                          {% else %}
                          <br><b class='m-3 mt-3 text-dark'>{{l.t}}</b> : <span class='m-2 text-primary'>{{l.s}}</span><hr>
                          {% endif %}
                          {% endfor %}
                          <!-- Your content goes here -->
                          <!-- Content must exceed the dimensions of the scrollable div to trigger scrolling -->
                          
                        </div>
                  </div>
                  </div>
                </div>
                <!-- /# card -->
            </div>
            <!-- <i class="fa-regular fa-lightbulb " id="hint-bulb"></i> -->

              <div class="row">
                <div class="col-lg-12">
                  <div class="footer">
                    <p>2023 Â© The Delta Trading Bot
                    </p>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>


    <!-- jquery vendor -->
    
    <script src="{% static 'js/lib/jquery.min.js' %}"></script>
    <script src="{% static 'js/lib/jquery.nanoscroller.min.js' %}"></script>
    <!-- nano scroller -->
    <script src="{% static 'js/lib/menubar/sidebar.js' %}"></script>
    <script src="{% static 'js/lib/preloader/pace.min.js' %}"></script>
    <!-- sidebar -->

    <script src="{% static 'js/lib/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/scripts.js' %}"></script>
    <!-- bootstrap -->

    <script src="{% static 'js/lib/calendar-2/moment.latest.min.js' %}"></script>
    <script src="{% static 'js/lib/calendar-2/pignose.calendar.min.js' %}"></script>
    <script src="{% static 'js/lib/calendar-2/pignose.init.js' %}"></script>


    <script src="{% static 'js/lib/circle-progress/circle-progress.min.js' %}"></script>
    <script src="{% static 'js/lib/circle-progress/circle-progress-init.js' %}"></script>
    <script src="{% static 'js/lib/chartist/chartist.min.js' %}"></script>
    <script src="{% static 'js/lib/sparklinechart/jquery.sparkline.min.js' %}"></script>
    <script src="{% static 'js/lib/sparklinechart/sparkline.init.js' %}"></script>
    <script src="{% static 'js/lib/owl-carousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/lib/owl-carousel/owl.carousel-init.js' %}"></script>

    <script>
      function addSignals(data){
        if(data.dir == "call"){
          $(".content").append("<br><b class='m-3 mt-3 text-dark'>" + data.time +"</b> : <span class='m-2 text-success'>" + data.signal + "</span><hr>")
        }else if(data.dir == "put"){
          $(".content").append("<br><b class='m-3 mt-3 text-dark'>" + data.time +"</b> : <span class='m-2 text-danger'>" + data.signal + "</span><hr>")
        }else{
          $(".content").append("<br><b class='m-3 mt-3 text-dark'>" + data.time +"</b> : <span class='m-2 text-primary'>" + data.signal + "</span><hr>")
        }
        console.log("success");
      }
      function fetchsignal () {
            $.ajax({
              type: "GET",
              url: "/get-signals",
              dataType: "json",
              success: function (response) {
                console.log(response);
                if(response.status == 'success') {
                  addSignals(response.data);
                } else {
                  toastr.error(response.message);
                }
              }
            });
          }
          fetchsignal();
          function scheduleExecution() {
            var now = new Date();
            var nextRunTime = new Date(now);
            nextRunTime.setMinutes(now.getMinutes() + (5 - (now.getMinutes() % 5)));
            nextRunTime.setSeconds(0);
            var timeToSleep = nextRunTime - now;
            setTimeout(function () {
              fetchsignal();
                scheduleExecution();
            }, timeToSleep);
        }
        scheduleExecution();

        
    </script>
</body>

</html>
